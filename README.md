# Harbor Scan Tools

–ù–∞–±–æ—Ä bash —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Harbor Registry: –∑–∞–ø—É—Å–∫ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîç –ó–∞–ø—É—Å–∫ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –¥–ª—è –æ–±—Ä–∞–∑–æ–≤
- üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- üéØ –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
- üîÑ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–µ—Ä–µ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- üìà –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
- üé® –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —É—Ä–æ–≤–Ω–µ–π –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
harbor_scan_run/
‚îú‚îÄ‚îÄ scan_all_images.sh          # –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–±—Ä–∞–∑–æ–≤ –≤–æ –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö
‚îú‚îÄ‚îÄ scan_project.sh             # –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ check_scan_status.sh        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –æ–±—Ä–∞–∑–æ–≤
‚îú‚îÄ‚îÄ check_unscanned_images.sh   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—Ä–∞–∑–æ–≤ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
‚îî‚îÄ‚îÄ README.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/ant1freeze/harbor-scan-tools.git
cd harbor-scan-tools
```

2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```bash
cp harbor.conf.example harbor.conf
```

3. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `harbor.conf` –ø–æ–¥ –≤–∞—à–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
```bash
nano harbor.conf
```

4. –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º–∏:
```bash
chmod +x *.sh
```

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤

**–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–±—Ä–∞–∑–æ–≤ –≤–æ –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö:**
```bash
./scan_all_images.sh
```

**–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:**
```bash
# –û–±—ã—á–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç —É–∂–µ –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ)
./scan_project.sh library
./scan_project.sh test_project

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (–≤—Å–µ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç)
./scan_project.sh library --force
./scan_project.sh test_project --force
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö –æ–±—Ä–∞–∑–æ–≤:**
```bash
./check_scan_status.sh
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—Ä–∞–∑–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ:**
```bash
# –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ–æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–∑—ã
./check_unscanned_images.sh library
./check_unscanned_images.sh test_project

# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –æ–±—Ä–∞–∑—ã —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
./check_unscanned_images.sh library --all
./check_unscanned_images.sh test_project --all
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `harbor.conf`. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `harbor.conf.example` –≤ `harbor.conf` –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ:

```bash
# Harbor Configuration
HARBOR_URL="http://localhost:8080"
USERNAME="admin"
PASSWORD="Harbor12345"
TIMEOUT=300
VERBOSE=false
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

- `HARBOR_URL` - URL –≤–∞—à–µ–≥–æ Harbor Registry
- `USERNAME` - –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `PASSWORD` - –ø–∞—Ä–æ–ª—å –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `TIMEOUT` - —Ç–∞–π–º–∞—É—Ç –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
- `VERBOSE` - –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥ (true/false)

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** –§–∞–π–ª `harbor.conf` –∏—Å–∫–ª—é—á–µ–Ω –∏–∑ Git –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ñ–∞–π–ª—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–∞—Ä–æ–ª—è–º–∏!

## üìä –ü—Ä–∏–º–µ—Ä—ã –≤—ã–≤–æ–¥–∞

### –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:
```
üîç –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–±—Ä–∞–∑–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ: test_project
üèóÔ∏è  –ü—Ä–æ–µ–∫—Ç: test_project

  üì¶ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: golang
üîÑ test_project/golang@sha256:64749ebac738... - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–µ—Ä–µ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (–±—ã–ª–æ: 239 —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π)
üì¶ –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: test_project/golang@sha256:64749ebac738...
‚úÖ –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –¥–ª—è test_project/golang@sha256:64749ebac738...

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ 'test_project':
  –ù–æ–≤—ã—Ö —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –∑–∞–ø—É—â–µ–Ω–æ: 7
  –£–∂–µ –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ/–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è: 0
  –û—à–∏–±–æ–∫: 0
  –í—Å–µ–≥–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤: 7
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π:
```
üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—Ä–∞–∑–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ: test_project
üèóÔ∏è  –ü—Ä–æ–µ–∫—Ç: test_project

üìã –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –æ–±—Ä–∞–∑–æ–≤:

‚úÖ test_project/golang@sha256:64749ebac738... - üü† –í–´–°–û–ö–ò–ô
    üìä –£—è–∑–≤–∏–º–æ—Å—Ç–∏: 239 (C:0 H:1 M:1 L:214 U:23)
    üîß –ò—Å–ø—Ä–∞–≤–∏–º–æ: 122
‚úÖ test_project/nginx@sha256:acd1b78ac05e... - üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô
    üìä –£—è–∑–≤–∏–º–æ—Å—Ç–∏: 322 (C:1 H:2 M:5 L:277 U:37)
    üîß –ò—Å–ø—Ä–∞–≤–∏–º–æ: 216

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ 'test_project':
  –í—Å–µ–≥–æ –æ–±—Ä–∞–∑–æ–≤: 7
  –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ: 7
  –ù–µ –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ: 0

üîç –°–≤–æ–¥–∫–∞ –ø–æ —É—è–∑–≤–∏–º–æ—Å—Ç—è–º:
  üìä –í—Å–µ–≥–æ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π: 1086
  üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ: 1
  üü† –í—ã—Å–æ–∫–∏–µ: 5
  üü° –°—Ä–µ–¥–Ω–∏–µ: 8
  üü¢ –ù–∏–∑–∫–∏–µ: 949
  ‚ùì –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ: 123
  üîß –ò—Å–ø—Ä–∞–≤–∏–º—ã–µ: 512
  ‚ö†Ô∏è  –û–±—â–∏–π —É—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞: üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô

üîç –°–∫–∞–Ω–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞: Grype latest (Anchore)
```

## üé® –£—Ä–æ–≤–Ω–∏ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏

- üî¥ **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô** - –µ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏
- üü† **–í–´–°–û–ö–ò–ô** - –µ—Å—Ç—å –≤—ã—Å–æ–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏
- üü° **–°–†–ï–î–ù–ò–ô** - –µ—Å—Ç—å —Å—Ä–µ–¥–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏
- üü¢ **–ù–ò–ó–ö–ò–ô** - —Ç–æ–ª—å–∫–æ –Ω–∏–∑–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏
- ‚úÖ **–ë–ï–ó–û–ü–ê–°–ù–´–ô** - —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –Ω–µ—Ç

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Harbor Registry** v2.0+
- **jq** (–¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ JSON)
- **curl**

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ (`git checkout -b feature/amazing-feature`)
3. –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ –≤–µ—Ç–∫—É (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.